title: 讲讲ECMAScript 6那些事
date: 2016-09-14 17:56:43
tags:
---
ECMAScript 6（下面简称ES6）已于2015年6月正式发布，将会成为Javascript语言新的标准。ES6提供的新语法与新特性给JSer们带来不一样的体验。

虽然目前没有浏览器对ES6全部特性能够完美的支持，可以通过[http://kangax.github.io/compat-table/es6/](http://kangax.github.io/compat-table/es6/)查看浏览器的支持情况。但是可以通过多种转换器来体验ES6更多的特性。比如最常用的Babel。

这篇博客将会介绍ES6比较常用的语法特性，希望能够给大家带来收获。在线测试代码可以点击[这里](http://babeljs.cn/repl/)。

## 目录
 ** [1.部署使用](#use) ** 
 ** [2.let和const](#var) **
 ** [3.箭头函数](#arrow) **

 ------

## <span id="use">1.部署使用<span>
 ES6发布至今，许多浏览器的最新版本对ES6大部分特性都实现了。如果想要更好的体验ES6的新特性和新语法，可以使用转换器。Babel转码器是使用比较广泛的，可以将ES6转换成ES5。

------

## <span id="var">2.let和const</span>
`let`和`const`是ES6新增的声明变量的命令。使用方法与`var`相似，不过`let`和`const`声明的变量只能在所在的代码块使用，也就是块级作用域。
`const`即constant，用来声明只读的常量，一旦声明就必须赋值，声明常量之后不可赋值，但是可以继续添加属性。
例如：
```
const Pi;  // Missing initializer in const declaration
```
`const`声明常量时必须赋值，否则报错。
```
const Pi = 3.14;
Pi = 3;     //Assignment to constant variable.
```
由于`const`声明的Pi是常量，如果初始化后对其赋值，则报错。
```
const obj = {};
obj.name = "张三";
console.log(obj);           // {name: "张三"}
obj = {};              //Assignment to constant variable.
```
常量`obj`是一个对象，可以对其添加属性。
`let`其与`var`的不同体现在三点：
** (1)不存在变量提升。**
使用`var`：
``` javascript
var str = "hello";
    function getStr(arg) {
        if (arg) {
            var str = 'hello world';
            return str;
        }
        return str;
    }
    console.log(getStr(false));  //undefined
```
使用`let`:
``` javascript
let str = "hello";
function getStr(arg) {
    if (arg) {
        let str = 'hello world';
        return str;
    }
    return str;
}
console.log(getStr(false));  //hello
```
第一个例子中，由于if内声明的变量会被提升到函数头部，所以返回了undefined。第二个例子由于let声明的变量不会发生变量提升，if内声明的变量只能在当前所在的代码块使用，所以直接返回hello。
** (2)暂时性死区。**
`let`声明的变量只能在代码块中使用，同时必须在声明后才能使用，否则会报错,这就是暂时性死区。
```
if(true){
    console.log(str);       //ReferenceError: str is not defined
    let str = "hello";
}
```
在`let`命令声明str之前，上面的代码都属于str的"死区"。
如果将上面的`let`变成`var`,则返回undefined：
```
if(true){
    console.log(str);       //undefined
    var str = "hello";
}
```

** (3)不允许重复声明。**
`let`不允许在相同的作用域内，重复声明同一个变量。而`var`重复声明变量，则后面的变量会覆盖前面声明的变量。
```javascript
if(true){
    let str = "hello";
    console.log(str);

    let str = "world";
    console.log(str); //SyntaxError: Identifier 'str' has already been declared
}
```
因此，对于`const`、`let`和`var`三个命令，当想要定义常量的时候可以选择`const`。当声明一个变量赋值后还会修改的可以选择`let`或`var`，当使用于循环计数或者算法，建议优先选择`let`。

------

## <span id="arrow">3.箭头函数</span>








