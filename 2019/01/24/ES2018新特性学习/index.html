<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> ES2018æ–°ç‰¹æ€§å­¦ä¹  Â· æ›¾æ´ä»ªåšå®¢</title><meta name="description" content="ES2018æ–°ç‰¹æ€§å­¦ä¹  - Zeng Zoe"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="css/googleapisFonts.css" type="text/css"></head><body><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/zengjieyi1994" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/ZENGzoe" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">ABOUT</a></li></ul></header><section class="container"><div class="post"><span style="display:none !important;"><span id="busuanzi_container_page_pv">æœ¬æ–‡æ€»é˜…è¯»é‡<span id="busuanzi_value_page_pv"></span></span></span><article class="post-block"><h1 class="post-title">ES2018æ–°ç‰¹æ€§å­¦ä¹ </h1><div class="post-time">2019å¹´1æœˆ23æ—¥</div><div class="post-content"><p>ESå…¨ç§°ECMAScriptï¼Œä¸‹é¢å°†ä¼šåˆ—å‡ºES2018ï¼ˆES9ï¼‰ä¸­å·²ç»è¿›å…¥stage-4çš„æ–°ç‰¹æ€§ã€‚</p>
<h2 id="æ–°ç‰¹æ€§åˆ—è¡¨"><a href="#æ–°ç‰¹æ€§åˆ—è¡¨" class="headerlink" title="æ–°ç‰¹æ€§åˆ—è¡¨"></a>æ–°ç‰¹æ€§åˆ—è¡¨</h2><p>ES2018æ–°ç‰¹æ€§æœ‰ï¼š</p>
<p>1.å¯¹è±¡çš„æ‰©å±•è¿ç®—ç¬¦<br><br>2.æ­£åˆ™è¡¨è¾¾å¼çš„æ”¹è¿›<br><br>3.å¼‚æ­¥è¿­ä»£å™¨å’Œå¼‚æ­¥ç”Ÿæˆå™¨<br><br>4.Promiseçš„finallyå›è°ƒ</p>
<h2 id="ä¸€ã€å¯¹è±¡çš„æ‹“å±•è¿ç®—ç¬¦"><a href="#ä¸€ã€å¯¹è±¡çš„æ‹“å±•è¿ç®—ç¬¦" class="headerlink" title="ä¸€ã€å¯¹è±¡çš„æ‹“å±•è¿ç®—ç¬¦"></a>ä¸€ã€å¯¹è±¡çš„æ‹“å±•è¿ç®—ç¬¦</h2><p>æ‹“å±•è¿ç®—ç¬¦ï¼Œä¹Ÿå«Rest/Spreadï¼Œåœ¨ES6æ—¶æå‡ºäº†æ•°ç»„çš„æ‰©å±•è¿ç®—ç¬¦ï¼Œä»…ç”¨äºæ•°ç»„ï¼Œè€Œåœ¨ES9ä¸­åˆ™æ–°å¢äº†å¯¹è±¡çš„æ‹“å±•è¿ç®—ç¬¦ã€‚æ‰©å±•è¿ç®—ç¬¦ç”¨<code>...</code>è¡¨ç¤ºã€‚</p>
<h4 id="ç”¨æ³•ï¼š"><a href="#ç”¨æ³•ï¼š" class="headerlink" title="ç”¨æ³•ï¼š"></a>ç”¨æ³•ï¼š</h4><p><strong>ES6:</strong></p>
<p>example1:</p>
<figure class="highlight lsl"><table><tr><td class="code"><pre><span class="line">const arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</span><br><span class="line">const [a,b,...c] = arr;</span><br><span class="line"></span><br><span class="line">console.log(a,b); <span class="comment">//1 2</span></span><br><span class="line">console.log(c);  <span class="comment">//[3,4,5]</span></span><br></pre></td></tr></table></figure>
<p>example2:</p>
<figure class="highlight lsl"><table><tr><td class="code"><pre><span class="line">const nums = [<span class="number">23</span>,<span class="number">12</span>,<span class="number">3</span>,<span class="number">12</span>,<span class="number">3</span>];</span><br><span class="line">const result = Math.max(...nums);</span><br><span class="line"></span><br><span class="line">console.log(result);    <span class="comment">//23</span></span><br></pre></td></tr></table></figure>
<p><strong>ES9:</strong></p>
<p>example3:</p>
<figure class="highlight ada"><table><tr><td class="code"><pre><span class="line">const obj = &#123; a : 1 , <span class="type">b</span> : 2 , <span class="type">c</span> : 3 , <span class="type">d</span> : 4&#125;;</span><br><span class="line">const &#123;a , b , ...z&#125; = obj;</span><br><span class="line"></span><br><span class="line">console.log(a,b);   //<span class="number">1</span> <span class="number">2</span></span><br><span class="line">console.log(z);     // &#123; c : 3 , <span class="type">d</span> : 4&#125;</span><br></pre></td></tr></table></figure>
<p>example4:</p>
<figure class="highlight ada"><table><tr><td class="code"><pre><span class="line">const obj1 = &#123; a : 1 , <span class="type">b</span> : 2&#125;;</span><br><span class="line">const obj2 = &#123;c : 3 , <span class="type">d</span> : 4&#125;;</span><br><span class="line"></span><br><span class="line">const obj3 = &#123;...obj1 , ...obj2&#125;; //åˆå¹¶å¯¹è±¡</span><br><span class="line"></span><br><span class="line">console.log(obj3);      //&#123; a : 1 , <span class="type">b</span> : 2 , <span class="type">c</span> : 3 , <span class="type">d</span> : 4&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="æ³¨æ„ï¼š"><a href="#æ³¨æ„ï¼š" class="headerlink" title="æ³¨æ„ï¼š"></a>æ³¨æ„ï¼š</h4><p>1.è§£æ„èµ‹å€¼å¿…é¡»æ˜¯æœ€åä¸€ä¸ªå‚æ•°ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p>
<p>2.è§£æ„èµ‹å€¼çš„åçš„å¯¹è±¡åˆ›å»ºçš„æ˜¯æ–°çš„å¼•ç”¨ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj1 = &#123; a : <span class="number">1</span>&#125;; </span><br><span class="line"><span class="keyword">const</span> &#123;...obj2&#125; = obj1; </span><br><span class="line"></span><br><span class="line">console.<span class="built_in">log</span>(obj2);  <span class="comment">//&#123; a : 1&#125;</span></span><br><span class="line"></span><br><span class="line">obj1.a = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">console.<span class="built_in">log</span>(obj1);  <span class="comment">// &#123; a : 2&#125;</span></span><br><span class="line">console.<span class="built_in">log</span>(obj2);  <span class="comment">//&#123; a : 1&#125;</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<h2 id="äºŒã€æ­£åˆ™è¡¨è¾¾å¼çš„æ”¹è¿›"><a href="#äºŒã€æ­£åˆ™è¡¨è¾¾å¼çš„æ”¹è¿›" class="headerlink" title="äºŒã€æ­£åˆ™è¡¨è¾¾å¼çš„æ”¹è¿›"></a>äºŒã€æ­£åˆ™è¡¨è¾¾å¼çš„æ”¹è¿›</h2><p>åœ¨ES9ä¸­ï¼Œå¯¹äºæ­£åˆ™è¡¨è¾¾å¼çš„æ”¹è¿›ä¸»è¦æœ‰å››ä¸ªæ–¹é¢ï¼š</p>
<p>1.ä½ç½®è¿ç®—ç¬¦<br>2.Unicodeè½¬ä¹‰<br>3.å‘½åæ•è·ç»„<br>4.ä¿®é¥°ç¬¦s</p>
<h4 id="ç”¨æ³•ï¼š-1"><a href="#ç”¨æ³•ï¼š-1" class="headerlink" title="ç”¨æ³•ï¼š"></a>ç”¨æ³•ï¼š</h4><h5 id="1-ä½ç½®ä¿®é¥°ç¬¦"><a href="#1-ä½ç½®ä¿®é¥°ç¬¦" class="headerlink" title="1.ä½ç½®ä¿®é¥°ç¬¦"></a>1.ä½ç½®ä¿®é¥°ç¬¦</h5><p>ä½ç½®ä¿®é¥°ç¬¦ä¸»è¦æœ‰å››ä¸ªï¼š</p>
<p><strong><code>q?=p</code></strong> ï¼šæ•è·qçš„åé¢æ˜¯æœ‰pçš„å­—ç¬¦ä¸²</p>
<figure class="highlight stata"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">reg</span> = /hello(?= world)/;</span><br><span class="line"></span><br><span class="line"><span class="keyword">reg</span>.<span class="keyword">test</span>('a hello world sentences');    <span class="comment">//true</span></span><br><span class="line"><span class="keyword">reg</span>.<span class="keyword">test</span>('a hello kugou');    <span class="comment">//false</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<p><strong><code>q?!p</code></strong> ï¼šæ•è·qçš„åé¢ä¸ä¸ºpçš„å­—ç¬¦ä¸²</p>
<figure class="highlight stata"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">reg</span> = /hello(?= world)/;</span><br><span class="line"></span><br><span class="line"><span class="keyword">reg</span>.<span class="keyword">test</span>('a hello world sentences');    <span class="comment">//false</span></span><br><span class="line"><span class="keyword">reg</span>.<span class="keyword">test</span>('a hello kugou');    <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<p><strong><code>(?&lt;=q)p</code></strong> ï¼šæ•è·på‰é¢æœ‰qçš„å­—ç¬¦ä¸²</p>
<figure class="highlight stata"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">reg</span> = /(?&lt;=hello) world/;</span><br><span class="line"></span><br><span class="line"><span class="keyword">reg</span>.<span class="keyword">test</span>('a hello world sentences');    <span class="comment">//true</span></span><br><span class="line"><span class="keyword">reg</span>.<span class="keyword">test</span>('a haha kugou');  <span class="comment">//false</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<p><strong><code>(?&lt;!q)p</code></strong> ï¼šæ•è·på‰é¢æ²¡æœ‰qçš„å­—ç¬¦ä¸²</p>
<figure class="highlight stata"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">reg</span> = /(?&lt;!hello) world/;</span><br><span class="line"></span><br><span class="line"><span class="keyword">reg</span>.<span class="keyword">test</span>('a hello world sentences');    <span class="comment">//false</span></span><br><span class="line"><span class="keyword">reg</span>.<span class="keyword">test</span>('a haha world');  <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<h5 id="2-Unicodeè½¬ä¹‰"><a href="#2-Unicodeè½¬ä¹‰" class="headerlink" title="2.Unicodeè½¬ä¹‰"></a>2.Unicodeè½¬ä¹‰</h5><p>Unicodeè½¬ä¹‰å¯ä»¥é€šè¿‡<code>\p{...}</code>æ•è·ï¼Œ<code>\P{...}</code>æ•è·çš„æ˜¯ä¸ç¬¦åˆè½¬ä¹‰çš„å­—ç¬¦ä¸²ã€‚å¤§æ‹¬å·å†…å¯ä»¥ä¼ å…¥ä¸åŒç±»å‹çš„unicodeå­—ç¬¦å…³é”®å­—ï¼Œä»¥ä¸‹æ˜¯ä¸åŒunicodeå­—ç¬¦å…³é”®å­—çš„ç¤ºä¾‹ï¼š</p>
<p><strong>ASCII</strong> ï¼šæ•è·ASCII å­—ç¬¦é›†çš„å­—ç¬¦ä¸²</p>
<figure class="highlight stata"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">reg</span> = /^\p&#123;ASCII&#125;+$/<span class="keyword">u</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">reg</span>.<span class="keyword">test</span>('abc');    <span class="comment">//true</span></span><br><span class="line"><span class="keyword">reg</span>.<span class="keyword">test</span>('abcğŸ™ƒ');  <span class="comment">//false</span></span><br></pre></td></tr></table></figure>
<p><strong>ASCII_Hex_Digit</strong> ï¼š æ•è·16è¿›åˆ¶æ•°å­—å­—ç¬¦ä¸²</p>
<figure class="highlight stata"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">reg</span> = /^\p&#123;ASCII_Hex_Digit&#125;+$/<span class="keyword">u</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">reg</span>.<span class="keyword">test</span>('012EF');  <span class="comment">//true</span></span><br><span class="line"><span class="keyword">reg</span>.<span class="keyword">test</span>('<span class="keyword">G</span>');  <span class="comment">//false</span></span><br></pre></td></tr></table></figure>
<p><strong>Uppercase/Lowercase</strong> ï¼š æ•è·å¤§æˆ–å°å†™çš„å­—ç¬¦ä¸²</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"><span class="regexp">/\p&#123;Uppercase&#125;/u</span>.test(<span class="string">'A'</span>); <span class="regexp">//</span>true</span><br><span class="line"><span class="regexp">/\p&#123;Lowercase&#125;/u</span>.test(<span class="string">'a'</span>); <span class="regexp">//</span>true</span><br></pre></td></tr></table></figure>
<p><strong>White_Space</strong> ï¼šæ•è·ç©ºæ ¼<br><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"><span class="regexp">/\p&#123;White_Space&#125;/u</span>.test(<span class="string">' '</span>) <span class="regexp">//</span>true</span><br></pre></td></tr></table></figure></p>
<p><strong>Emoji</strong> ï¼š æ•è·emojiè¡¨æƒ…</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"><span class="regexp">/\p&#123;Emoji&#125;/u</span>.test(<span class="string">'ğŸ™ƒ'</span>);    <span class="regexp">//</span>true</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œåˆ—å‡ºäº†éƒ¨åˆ†çš„unicodeå…³é”®å­—ï¼Œè¿˜æœ‰å…¶ä»–æ›´å¤šå¯ä»¥æŸ¥çœ‹<a href="https://github.com/tc39/proposal-regexp-unicode-property-escapes" target="_blank" rel="noopener">https://github.com/tc39/proposal-regexp-unicode-property-escapes</a></p>
<h5 id="3-å‘½åæ•è·ç»„"><a href="#3-å‘½åæ•è·ç»„" class="headerlink" title="3.å‘½åæ•è·ç»„"></a>3.å‘½åæ•è·ç»„</h5><p>æ•è·ç»“æœä¸­æ–°å¢äº†<code>groups</code>å¯¹è±¡ï¼Œå¯ä»¥å°†æ•è·ä¸€äº›å­—æ®µæ”¾å…¥æ•è·ç»“æœçš„groupsä¸­ã€‚æ ¼å¼ä¸º<code>(?&lt;name&gt;Regexp)</code>ï¼Œå…¶ä¸­<code>name</code>ä¸ºgroupsä¸­çš„<code>key</code>å€¼ï¼Œå¯ä»¥é€šè¿‡è¯¥<code>key</code>å€¼æ‹¿åˆ°æ•è·çš„ç»“æœï¼Œ<code>Regexp</code>ä¸ºè¦æ•è·çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚</p>
<figure class="highlight processing"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> reg = /(?&lt;<span class="built_in">year</span>&gt;\d&#123;<span class="number">4</span>&#125;)-(?&lt;<span class="built_in">month</span>&gt;\d&#123;<span class="number">2</span>&#125;)-(?&lt;<span class="built_in">day</span>&gt;\d&#123;<span class="number">2</span>&#125;)/</span><br><span class="line"><span class="keyword">const</span> result = reg.exec(<span class="string">'2015-01-02'</span>);</span><br><span class="line">console.<span class="built_in">log</span>(reuslt.groups);	<span class="comment">//&#123;year: "2015", month: "01", day: "02"&#125;</span></span><br></pre></td></tr></table></figure>
<h5 id="4-ä¿®é¥°ç¬¦s"><a href="#4-ä¿®é¥°ç¬¦s" class="headerlink" title="4.ä¿®é¥°ç¬¦s"></a>4.ä¿®é¥°ç¬¦s</h5><p>å¢åŠ äº†æ–°çš„ä¿®é¥°ç¬¦<code>s</code>ï¼Œå¯ä»¥è®©<code>.</code>åŒ¹é…ä»»æ„çš„å­—ç¬¦ï¼ŒåŒ…æ‹¬æ¢è¡Œç¬¦ã€‚åˆå«dot allã€‚</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"><span class="regexp">/hello.world/</span>.test(<span class="string">'hello\nworld'</span>);	<span class="regexp">//</span>false</span><br><span class="line"><span class="regexp">/hello.world/</span>s.test(<span class="string">'hello\nworld'</span>);	<span class="regexp">//</span>true</span><br></pre></td></tr></table></figure>
<h2 id="ä¸‰ã€å¼‚æ­¥è¿­ä»£å™¨å’Œå¼‚æ­¥ç”Ÿæˆå™¨"><a href="#ä¸‰ã€å¼‚æ­¥è¿­ä»£å™¨å’Œå¼‚æ­¥ç”Ÿæˆå™¨" class="headerlink" title="ä¸‰ã€å¼‚æ­¥è¿­ä»£å™¨å’Œå¼‚æ­¥ç”Ÿæˆå™¨"></a>ä¸‰ã€å¼‚æ­¥è¿­ä»£å™¨å’Œå¼‚æ­¥ç”Ÿæˆå™¨</h2><h4 id="è¿­ä»£å™¨å’Œç”Ÿæˆå™¨"><a href="#è¿­ä»£å™¨å’Œç”Ÿæˆå™¨" class="headerlink" title="è¿­ä»£å™¨å’Œç”Ÿæˆå™¨"></a>è¿­ä»£å™¨å’Œç”Ÿæˆå™¨</h4><p>è¿­ä»£å™¨ï¼ˆIteratorï¼‰å’Œç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰äºES6ä¸­æå‡ºã€‚</p>
<p>Iteratorä¸»è¦ç”¨äºéå†ä¸åŒçš„æ•°æ®ç»“æ„ï¼Œéå†çš„æ•°æ®ç»“æ„è¦å…·æœ‰<code>Symbol.iterator</code>å±æ€§ã€‚Iteratorä¸­åŒ…å«<code>next</code>æ–¹æ³•ï¼Œè°ƒç”¨<code>next</code>æ–¹æ³•å¯ä»¥è¿”å›ä¸¤ä¸ªå€¼ä¸º<code>value</code>å’Œ<code>done</code>ï¼Œ<code>value</code>ä¸ºè¿”å›çš„å€¼ï¼Œ<code>done</code>ä¸ºæ ‡è¯†éå†æ˜¯å¦ç»“æŸï¼Œå½“ä¸º<code>false</code>æ—¶ï¼Œéå†æœªç»“æŸï¼Œå½“ä¸º<code>true</code>æ—¶ï¼Œéå†ç»“æŸã€‚ES6æä¾›äº†<code>for...of</code>æ¥éå†Iteratoræ•°æ®ã€‚</p>
<p>æ•°ç»„æ˜¯é»˜è®¤å…·æœ‰<code>Symbol.iterator</code>å±æ€§çš„ï¼Œä»¥æ•°ç»„ä¸ºä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>,<span class="string">'e'</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> arr[<span class="built_in">Symbol</span>.iterator]);   <span class="comment">//function</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> item <span class="keyword">of</span> arr)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(item);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//a</span></span><br><span class="line"><span class="comment">//b</span></span><br><span class="line"><span class="comment">//c</span></span><br><span class="line"><span class="comment">//d</span></span><br><span class="line"><span class="comment">//e</span></span><br></pre></td></tr></table></figure>
<p>Generatorå‡½æ•°æ˜¯ES6æä¾›çš„ä¸€ç§å¼‚æ­¥è§£å†³æ–¹æ¡ˆã€‚æ‰§è¡ŒGeneratorå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œè¿”å›çš„éå†å™¨å¯¹è±¡ï¼Œå¯ä»¥ä¾æ¬¡éå†Generatorå‡½æ•°å†…éƒ¨çš„æ¯ä¸€ä¸ªçŠ¶æ€ã€‚Generatorå‡½æ•°æœ‰ä¸¤ä¸ªç‰¹å¾ï¼Œä¸€æ˜¯<code>function</code>å…³é”®å­—ä¸å‡½æ•°åä¹‹é—´æœ‰ä¸€ä¸ª<code>*</code>å·ï¼ŒäºŒæ˜¯å‡½æ•°ä½“å†…éƒ¨ä½¿ç”¨<code>yield</code>è¡¨è¾¾å¼ï¼Œå®šä¹‰ä¸åŒçš„å†…éƒ¨çŠ¶æ€ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">Test</span><span class="params">()</span></span>&#123;</span><br><span class="line">	console.<span class="built_in">log</span>(<span class="string">'start'</span>);</span><br><span class="line">	<span class="built_in">yield</span> <span class="number">1</span>;</span><br><span class="line">	<span class="built_in">yield</span> <span class="number">2</span>;</span><br><span class="line">	console.<span class="built_in">log</span>(<span class="string">'end'</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const test = Test();</span><br><span class="line"></span><br><span class="line">console.<span class="built_in">log</span>(typeof test[Symbol.iterator]);  //<span class="function"><span class="keyword">function</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">test.next</span><span class="params">()</span></span>;    //start &#123;value: <span class="number">1</span>, done: <span class="literal">false</span>&#125;</span><br><span class="line">test.<span class="built_in">next</span>();    //&#123;value: <span class="number">2</span>, done: <span class="literal">false</span>&#125;</span><br><span class="line">test.<span class="built_in">next</span>();    //<span class="keyword">end</span> &#123;value: <span class="number">3</span>, done: <span class="literal">true</span>&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å¼‚æ­¥è¿­ä»£å™¨å’Œå¼‚æ­¥ç”Ÿæˆå™¨"><a href="#å¼‚æ­¥è¿­ä»£å™¨å’Œå¼‚æ­¥ç”Ÿæˆå™¨" class="headerlink" title="å¼‚æ­¥è¿­ä»£å™¨å’Œå¼‚æ­¥ç”Ÿæˆå™¨"></a>å¼‚æ­¥è¿­ä»£å™¨å’Œå¼‚æ­¥ç”Ÿæˆå™¨</h4><p>å¼‚æ­¥è¿­ä»£å™¨ä¸åŒæ­¥è¿­ä»£å™¨çš„åŒºåˆ«åœ¨äºï¼ŒåŒæ­¥è¿­ä»£å™¨çš„<code>next</code>æ–¹æ³•è¿”å›çš„æ˜¯åŒ…å«<code>value</code>å’Œ<code>done</code>çš„å¯¹è±¡ï¼Œå¼‚æ­¥è¿­ä»£å™¨çš„<code>next</code>æ–¹æ³•è¿”å›çš„æ˜¯promiseå¯¹è±¡ï¼Œä¸”promiseå¯¹è±¡å›è°ƒä¸­å‚æ•°åŒ…å«<code>value</code>å’Œ<code>done</code>å¯¹è±¡ã€‚å¼‚æ­¥è¿­ä»£å™¨ä¸­åŒ…å«çš„<code>Symbol.asyncIterator</code>å±æ€§ã€‚</p>
<figure class="highlight ocaml"><table><tr><td class="code"><pre><span class="line">asyncIterator.next<span class="literal">()</span>.<span class="keyword">then</span>((&#123;<span class="keyword">value</span> , <span class="keyword">done</span>&#125;) =&gt; &#123;</span><br><span class="line">    console.log(<span class="keyword">value</span> , <span class="keyword">done</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>å¼‚æ­¥ç”Ÿæˆå™¨ä¸æ™®é€šç”Ÿæˆå™¨åœ¨äºï¼Œå¼‚æ­¥ç”Ÿæˆå™¨çš„å®šä¹‰åŠ å…¥äº†<code>async</code>ï¼Œä¸”å†…éƒ¨å¯ä»¥ä½¿ç”¨<code>await</code>ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå…·æœ‰<code>Symbol.asyncIterator</code>æ–¹æ³•çš„å¯¹è±¡ã€‚å› æ­¤å¯ä»¥ç”¨å¼‚æ­¥ç”Ÿæˆå™¨åˆ›å»ºå¼‚æ­¥è¿­ä»£å™¨ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span>* <span class="title">Test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="keyword">await</span> <span class="built_in">Promise</span>.resolve(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">yield</span> <span class="keyword">await</span> <span class="built_in">Promise</span>.resolve(<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">yield</span> <span class="keyword">await</span> <span class="built_in">Promise</span>.resolve(<span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> test = Test();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(test[<span class="built_in">Symbol</span>.asyncIterator]);    <span class="comment">//function</span></span><br></pre></td></tr></table></figure>
<p><code>for...of</code>åªèƒ½ç”¨æ¥éå†åŒæ­¥è¿­ä»£å™¨ï¼Œå› æ­¤ES9æä¾›äº†<code>for...await...of</code>æ¥éå†å¼‚æ­¥è¿­ä»£å™¨ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> <span class="keyword">await</span> (<span class="keyword">const</span> item <span class="keyword">of</span> test)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(item);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//1</span></span><br><span class="line"><span class="comment">//2</span></span><br><span class="line"><span class="comment">//3</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<h2 id="å››ã€Promiseçš„finallyå›è°ƒ"><a href="#å››ã€Promiseçš„finallyå›è°ƒ" class="headerlink" title="å››ã€Promiseçš„finallyå›è°ƒ"></a>å››ã€Promiseçš„finallyå›è°ƒ</h2><p>åœ¨ES9ä¸­ï¼Œæ–°å¢äº†Promiseçš„<code>finally</code>å›è°ƒå‡½æ•°ï¼Œæ— è®ºPromiseè¿”å›ç»“æœæ˜¯æˆåŠŸæ‰§è¡Œ<code>then()</code>è¿˜æ˜¯å¤±è´¥æ‰§è¡Œ<code>catch()</code>ï¼Œéƒ½ä¼šæ‰§è¡Œ<code>finally</code>å›è°ƒå‡½æ•°ã€‚</p>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line">function test(num)&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> Promise(<span class="function"><span class="params">(resolve , reject)</span> =&gt;</span> &#123;</span><br><span class="line">		<span class="keyword">if</span>(num == <span class="number">1</span>)&#123;</span><br><span class="line">			resolve()</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			reject();</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">test(<span class="number">1</span>).<span class="keyword">then</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'success'</span>)</span><br><span class="line">&#125;).<span class="keyword">finally</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'finally'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="regexp">//</span>success</span><br><span class="line"><span class="regexp">//</span><span class="keyword">finally</span></span><br><span class="line"></span><br><span class="line">test(<span class="number">2</span>).<span class="keyword">catch</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'error'</span>)</span><br><span class="line">&#125;).<span class="keyword">finally</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'finally'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="regexp">//</span>error </span><br><span class="line"><span class="regexp">//</span><span class="keyword">finally</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><p><a href="https://flaviocopes.com/es2018/" target="_blank" rel="noopener">1.THE ES2018 GUIDE</a><br><br><a href="https://juejin.im/post/5c0fd5a26fb9a049c30b17fe" target="_blank" rel="noopener">2.ES9ä¸­çš„å¼‚æ­¥è¿­ä»£å™¨ï¼ˆAsync iteratorï¼‰å’Œå¼‚æ­¥ç”Ÿæˆå™¨ï¼ˆAsync generatorï¼‰</a></p>
</div></article></div></section><footer><div class="paginator"><a href="/2019/01/24/å¦‚ä½•ç”¨Phaserå®ç°ä¸€ä¸ªå…¨å®¶ç¦æ‹¼å›¾h5/" class="prev">PRVE</a><a href="/2018/11/18/é¢å¯¹JSçš„Event-Loopç»ˆäºä¸æ‡µé€¼/" class="next">NEXT</a></div><div data-thread-key="2019/01/24/ES2018æ–°ç‰¹æ€§å­¦ä¹ /" data-title="ES2018æ–°ç‰¹æ€§å­¦ä¹ " data-url="http://zengzoe.github.io/2019/01/24/ES2018æ–°ç‰¹æ€§å­¦ä¹ /" data-author-key="1" class="ds-thread"></div><script>var duoshuoQuery = {short_name:"zengzoe"};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
})();

</script><div class="copyright"><p>Â© 2016 - 2019 <a href="http://zengzoe.github.io">Zeng Zoe</a>, unless otherwise noted.</p><p style="display:none !important;"><span id="busuanzi_container_site_pv">æœ¬ç«™æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡</span><span id="busuanzi_container_site_uv">æœ¬ç«™æ€»è®¿å®¢æ•°<span id="busuanzi_value_site_uv"></span>äººæ¬¡</span></p></div></footer><script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script></body></html>